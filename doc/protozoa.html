<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
	"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">

<head>
	<meta name="Author" content="Douglas Lau"/>
	<link href="protozoa.css" rel="stylesheet" type="text/css"/>
	<title>Protozoa Camera Control Mixer</title>
</head>

<body>
<h2>Protozoa Camera Control Mixer</h2>
<p>
	Protozoa is a program to integrate CCTV camera control systems from
	multiple vendors.
	It can combine control codes from different sources to facilitate
	sharing control between systems.
	It can also transcode camera control commands between vendor protocols,
	including <a href="manchester_code.html">American Dynamics
	(manchester)</a>, <a href="vicon_code.html">Vicon</a> and
	<a href="pelco_d_code.html">Pelco (D)</a>.
	It works by converting each input command to a protocol-neutral packet
	and then converting that packet to an output command.
</p>
<p>
	Most camera control systems use RS-422, which allows for much longer
	cable runs than the more common RS-232.
	Simple RS-422 to RS-232 converters are available, and are required to
	allow a computer with standard RS-232 ports to recognise the signals.
</p>
<h3>Configuration File</h3>
<p>
	The configuration file, /etc/protozoa.conf, contains a series of
	serial data control directives.
	Each directive describes an input and output serial port and protocol
	parameters.
	First, the input protocol, port, baud rate and address range are
	specified.
	Then comes the output protocol, port, baud rate and address shift.
</p>
<pre>
	manchester /dev/ttyS1:4800 1-255	vicon /dev/ttyS0:9600 0
</pre>
<p>
	The above configuration reads camera control commands on /dev/ttyS1
	at 4800 baud, decodes using the manchester protocol, then encodes to
	the vicon protocol and sends them out on /dev/ttyS0 at 9600 baud.
</p>
<pre>
	manchester /dev/ttyS1:9600 -	pelco_d /dev/ttyS0:9600
	vicon /dev/ttyS2:4800 -		pelco_d /dev/ttyS0:9600
	manchester /dev/ttyS4:9600 -	vicon /dev/ttyS3:9600
	vicon /dev/ttyS5:9600 -		vicon /dev/ttyS3:9600
</pre>
<p>
	This configuration interleaves commands from /dev/ttyS1 and /dev/ttyS2,
	sending them out on /dev/ttyS0.
	Also, commands from /dev/ttyS4 and /dev/ttyS5 are interleaved onto
	/dev/ttyS3.
</p>
<pre>
	vicon /dev/ttyS1:9600 1-255	manchester /dev/ttyS0:9600 0
	vicon /dev/ttyS2:9600 1-255	manchester /dev/ttyS0:9600 256
	vicon /dev/ttyS3:9600 1-255	manchester /dev/ttyS0:9600 512
</pre>
<p>
	This configuration combines three vicon lines into one manchester line,
	including receiver address translation.
</p>
<pre>
	vicon /dev/ttya01:9600 -	manchester /dev/ttya03:9600
	manchester /dev/ttya03:9600 -	pelco_d /dev/ttya02:9600
</pre>
<p>
	It is possible to use a loopback plug on one port, and send / receive
	data to / from that port.
	This is a good method of testing the protocol handlers. The
	configuration above is one example of this.
</p>
<p class="stamp">
	2008 Oct 23
</p>
</body>
</html>
